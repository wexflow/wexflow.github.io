(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();window.currentLang="en";const i=["en","fr","de","es","pt","zh","ja"];function l(t){window.translations=t,document.querySelectorAll("[data-i18n]").forEach(e=>{const r=e.getAttribute("data-i18n"),n=t[r];if(!n)return;/<\/?[a-z][\s\S]*>/i.test(n)||/&[a-z]+;/.test(n)?e.innerHTML=n:e.textContent=n}),document.querySelectorAll("[data-i18n-placeholder]").forEach(e=>{const r=e.getAttribute("data-i18n-placeholder"),n=t[r];n&&e.setAttribute("placeholder",n)})}function d(t){document.querySelectorAll("[data-lang]").forEach(e=>{e.removeAttribute("data-selected"),e.getAttribute("data-lang")===t&&e.setAttribute("data-selected","true")})}async function s(t){try{localStorage.setItem("lang",t),document.documentElement.lang=t;const e=await fetch(`locales/${t}.json`);if(!e.ok)throw new Error(`HTTP ${e.status}`);const r=await e.json();l(r),window.currentLang=t,document.title=r["website.title"]||document.title;const n=new URL(window.location);n.searchParams.set("lang",t),window.history.replaceState({},"",n),d(t)}catch(e){console.error(`Failed to load ${t} translations:`,e)}}async function u(){document.documentElement.setAttribute("data-loading","");const e=new URLSearchParams(window.location.search).get("lang"),r=localStorage.getItem("lang"),n=i.includes(e)?e:i.includes(r)?r:"en";await s(n),document.documentElement.removeAttribute("data-loading")}window.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search).get("lang"),r=localStorage.getItem("lang"),n=i.includes(e)?e:i.includes(r)?r:"en";s(n)});function g(){const t=document.querySelector(".hamburger"),e=document.querySelector("nav");!t||!e||t.addEventListener("click",()=>{const r=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!r),t.classList.toggle("active"),e.classList.toggle("active")})}function m(){const t=document.querySelector("header");t&&window.addEventListener("scroll",()=>{window.scrollY>10?t.classList.add("scrolled"):t.classList.remove("scrolled")})}function f(t){const e=document.getElementById("lang-toggle"),r=document.getElementById("lang-menu");!e||!r||(e.addEventListener("click",()=>{const n=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!n),r.hidden=n}),r.querySelectorAll("button").forEach(n=>{n.addEventListener("click",async()=>{const o=n.getAttribute("data-lang");o&&await t(o),e.setAttribute("aria-expanded","false"),r.hidden=!0})}),document.addEventListener("click",n=>{!e.contains(n.target)&&!r.contains(n.target)&&(e.setAttribute("aria-expanded","false"),r.hidden=!0)}))}function h(){const t=document.getElementById("theme-toggle");if(!t)return;const e=t.querySelector(".icon-sun"),r=t.querySelector(".icon-moon");function n(a){!e||!r||(a==="dark"?(e.style.display="block",r.style.display="none",t.setAttribute("aria-pressed","true")):(e.style.display="none",r.style.display="block",t.setAttribute("aria-pressed","false")))}const o=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",o),n(o),t.addEventListener("click",()=>{const c=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",c),localStorage.setItem("theme",c),n(c)})}function p(){const t=document.getElementById("year");t&&(t.textContent=new Date().getFullYear())}window.addEventListener("DOMContentLoaded",async()=>{try{await u(),g(),m(),f(s),h(),p()}catch(t){console.error("Error during app initialization:",t)}});
